class Cloud{constructor(a){window.ScopeCloud=this,this.url=window.location.origin+window.location.pathname+"lib/Sockets/lib/",this.JsonServer="lib/Sockets/lib/jsondb.php",this.buffer="",this.row=0,this.createSource(a),this.eventsTrigger=[],setTimeout(()=>{ScopeCloud.eventPatterns()},1)}event(a,b){this.eventsTrigger[a]=b}eventPatterns(){"function"==typeof this.eventsTrigger.connect&&this.eventsTrigger.connect();var a=this;window.addEventListener("beforeunload",function(b){a.eventsTrigger.disconnect();var c="o/";return b.returnValue=c,c})}createSource(a){this.source=new EventSource("lib/Sockets/lib/server.php?canal="+a+"&origin="+window.location.origin+window.location.pathname+"views/data/"),this.source.addEventListener("message",function(a){if(0==ScopeCloud.row&&""==ScopeCloud.buffer)ScopeCloud.buffer=a.data,ScopeCloud.row++,ScopeCloud.eventsTrigger.on(a.data);else if(ScopeCloud.row>0&&""!=ScopeCloud.buffer){var b=a.data,c=ScopeCloud.buffer.toString().replace("[","").replace("]","")+",",d=b.replace(c,"");ScopeCloud.eventsTrigger.on(d),ScopeCloud.buffer=b}})}}